<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="../assets/logo.jpg" />
    <title>Liên Hệ</title>
    <link rel="stylesheet" href="../css/lienhe.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>
    <div id="Main">
      <!-- Header -->
      <header id="header">
        <div class="logo-container">
          <a href="../header.html" class="logo-nav">
            <img src="../assets/logo.jpg" alt="Logo" />
            Volunteer Match
          </a>
        </div>
        <nav class="menu">
          <a href="../header.html">Trang chủ</a>
          <a href="vechungtoi.html">Về chúng tôi</a>
          <a href="hanhtrinh.html">Hành trình</a>
          <a href="thamgia.html">Tham gia</a>
          <a href="lienhe.html">Liên hệ</a>
          <a href="tinmoi.html">Tin mới</a>
        </nav>
        <div class="right-section">
          <a href="login.html" class="login-btn" id="auth-btn">Đăng nhập</a>
          <a href="donate.html" class="donate-btn">Hỗ trợ ngay</a>
        </div>
        <div class="hamburger">
          <i class="fas fa-bars"></i>
        </div>
      </header>

      <!-- Contact Section -->
      <section id="contact" class="fade-in">
        <div class="content-section">
          <h2 class="section-heading">LIÊN HỆ VỚI CHÚNG TÔI</h2>
          <p class="section-sub-heading">
            Chúng tôi luôn sẵn sàng lắng nghe và hỗ trợ bạn
          </p>

          <div class="contact-container">
            <!-- Contact Form -->
            <div class="contact-form">
              <form id="contact-form" onsubmit="return validateForm(event)">
                <div class="form-row">
                  <div class="form-group">
                    <label for="name">Họ và Tên *</label>
                    <input
                      type="text"
                      id="name"
                      name="name"
                      placeholder="Nhập họ và tên"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="email">Email *</label>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      placeholder="Nhập email của bạn"
                      required
                    />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="phone">Số Điện Thoại</label>
                    <input
                      type="tel"
                      id="phone"
                      name="phone"
                      placeholder="Nhập số điện thoại"
                    />
                  </div>
                  <div class="form-group">
                    <label for="subject">Chủ Đề *</label>
                    <input
                      type="text"
                      id="subject"
                      name="subject"
                      placeholder="Nhập chủ đề"
                      required
                    />
                  </div>
                </div>
                <div class="form-group">
                  <label for="message">Tin Nhắn *</label>
                  <textarea
                    id="message"
                    name="message"
                    placeholder="Nhập tin nhắn của bạn"
                    rows="5"
                    required
                  ></textarea>
                </div>
                <button type="submit" class="submit-btn">Gửi Tin Nhắn</button>
              </form>
              <div id="form-message" class="form-message"></div>
            </div>

            <!-- Contact Info -->
            <div class="contact-info">
              <h3 class="info-title">Thông Tin Liên Hệ</h3>
              <ul class="info-list">
                <li>
                  <i class="fas fa-map-marker-alt"></i>
                  <span>123 Đường Láng, Đống Đa, Hà Nội, Việt Nam</span>
                </li>
                <li>
                  <i class="fas fa-phone-alt"></i>
                  <span><a href="tel:+84987654321">+84 987 654 321</a></span>
                </li>
                <li>
                  <i class="fas fa-envelope"></i>
                  <span
                    ><a href="mailto:support@volunteermatch.vn"
                      >support@volunteermatch.vn</a
                    ></span
                  >
                </li>
                <li>
                  <i class="fas fa-clock"></i>
                  <span>Thứ 2 - Thứ 6: 8:00 - 17:00</span>
                </li>
              </ul>

              <!-- Social Media -->
              <div class="social-links">
                <h3 class="social-title">Theo Dõi Chúng Tôi</h3>
                <div class="social-icons">
                  <a href="#" aria-label="Facebook"
                    ><i class="fab fa-facebook-f"></i
                  ></a>
                  <a href="#" aria-label="Twitter"
                    ><i class="fab fa-twitter"></i
                  ></a>
                  <a href="#" aria-label="Instagram"
                    ><i class="fab fa-instagram"></i
                  ></a>
                  <a href="#" aria-label="LinkedIn"
                    ><i class="fab fa-linkedin-in"></i
                  ></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Map Section -->
      <section id="map" class="fade-in">
        <div class="map-container">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3724.096597314987!2d105.82496431542502!3d21.02851128599824!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135ab4b8d9b2d5f%3A0x9e4b2f0a5b1c0e5b!2sHà%20Nội%2C%20Vietnam!5e0!3m2!1sen!2s!4v1697712345678!5m2!1sen!2s"
            width="100%"
            height="400"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </section>

      <!-- Back to Top Button -->
      <button id="back-to-top" class="back-to-top">
        <i class="fas fa-arrow-up"></i>
      </button>
    </div>

    <!-- Scripts -->
    <script src="../js/include.js"></script>
    <script src="../js/login.js"></script>
    <script src="../js/lienhe.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
      // Initialize EmailJS with your Public Key
      emailjs.init({ publicKey: "-Y3KCrAXwQGa8NNT5" });

      // Form Validation and Submission with EmailJS
      function validateForm(event) {
        event.preventDefault();

        const form = document.getElementById("contact-form");
        const formMessage = document.getElementById("form-message");
        const name = document.getElementById("name").value.trim();
        const email = document.getElementById("email").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const subject = document.getElementById("subject").value.trim();
        const message = document.getElementById("message").value.trim();

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const phoneRegex = /^(\+\d{1,3}\s?)?\d{9,11}$/;

        formMessage.textContent = "";
        formMessage.classList.remove("success", "error");

        // Validate fields
        if (!name || !email || !subject || !message) {
          formMessage.textContent = "Vui lòng điền đầy đủ các trường bắt buộc.";
          formMessage.classList.add("error");
          return false;
        }

        if (!emailRegex.test(email)) {
          formMessage.textContent = "Vui lòng nhập địa chỉ email hợp lệ.";
          formMessage.classList.add("error");
          return false;
        }

        if (phone && !phoneRegex.test(phone)) {
          formMessage.textContent = "Vui lòng nhập số điện thoại hợp lệ.";
          formMessage.classList.add("error");
          return false;
        }

        // Show loading message
        formMessage.textContent = "Đang gửi...";

        // Send email using EmailJS
        emailjs
          .send("service_8eb7bt1", "template_bh3anpa", {
            name,
            email,
            phone,
            subject,
            message,
          })
          .then(
            () => {
              formMessage.textContent =
                "Tin nhắn của bạn đã được gửi thành công!";
              formMessage.classList.add("success");
              form.reset();
            },
            (error) => {
              formMessage.textContent =
                "Đã xảy ra lỗi khi gửi tin nhắn. Vui lòng thử lại.";
              formMessage.classList.add("error");
              console.error("EmailJS Error:", error.text || error);
            }
          );

        return false;
      }

      document.addEventListener("DOMContentLoaded", function () {
        const hamburger = document.querySelector(".hamburger");
        const menu = document.querySelector(".menu");

        hamburger.addEventListener("click", function () {
          menu.classList.toggle("active");
        });

        // Close menu when clicking outside
        document.addEventListener("click", function (event) {
          if (
            !menu.contains(event.target) &&
            !hamburger.contains(event.target)
          ) {
            menu.classList.remove("active");
          }
        });
      });
    </script>
  </body>
</html>
